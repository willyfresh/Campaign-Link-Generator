(function campaignLinkGenerator(){clgSettings.sources.tables={};clgSettings.sources.tables.external=[];clgSettings.sources.tables.internal=[];clgSettings.sources.tables.html='';clgSettings.link={};if(clgSettings.domain)$('#url-param-entry').before('<div class="input-group-prepend"><span class="input-group-text" id="utm-base-url">'+clgSettings.domain+'</span></div>');for(const medium in clgSettings.sources.external){clgSettings.sources.external[medium].forEach(function(source){clgSettings.sources.tables.external.push([medium,source]);});}
for(const medium in clgSettings.sources.internal){clgSettings.sources.internal[medium].forEach(function(source){clgSettings.sources.tables.internal.push([medium,source]);});}
{let rowCount=0;let foreman=0;do{clgSettings.sources.tables.html+='<tr><td>'
if(clgSettings.sources.tables.external[rowCount]){let extLowerCase=clgSettings.sources.tables.external[rowCount][1].toString().toLowerCase();clgSettings.sources.tables.html+='<div class="form-check"><input class="form-check-input" type="radio" name="source-param-entry" id="source-'+extLowerCase+'" value="'+extLowerCase+'" data-scope="external" data-medium="'+clgSettings.sources.tables.external[rowCount][0]+'"><label class="form-check-label" for="source-'+extLowerCase+'">'+clgSettings.sources.tables.external[rowCount][1]+'</label></div>'}
clgSettings.sources.tables.html+='</td><td>';if(clgSettings.sources.tables.internal[rowCount]){let intLowerCase=clgSettings.sources.tables.internal[rowCount][1].toString().toLowerCase();clgSettings.sources.tables.html+='<div class="form-check"><input class="form-check-input" type="radio" name="source-param-entry" id="source-'+intLowerCase+'" value="'+intLowerCase+'" data-scope="internal" data-medium="'+clgSettings.sources.tables.internal[rowCount][0]+'"><label class="form-check-label" for="source-'+intLowerCase+'">'+clgSettings.sources.tables.internal[rowCount][1]+'</label></div>'}
clgSettings.sources.tables.html+='</td></tr>';rowCount++;foreman=0;if(!clgSettings.sources.tables.external[rowCount])foreman++;if(!clgSettings.sources.tables.internal[rowCount])foreman++;}
while(foreman<2);$('#source-param tbody').html(clgSettings.sources.tables.html);}
if(clgSettings.content==='no')$('#content-param').remove();if(clgSettings.term==='no')$('#term-param').remove();$('#link-generator').click(function(){if($('#copyButton'))$('#copyButton').remove();clgSettings.link.url=clgSettings.domain+document.getElementById('url-param-entry').value.toLowerCase();clgSettings.link.campaign=document.getElementById('campaign-param-entry').value;const fullSourceTable=clgSettings.sources.tables.external.concat(clgSettings.sources.tables.internal);fullSourceTable.forEach(function(source){let sourceID='source-'+source[1].toLowerCase();if(document.getElementById(sourceID).checked){clgSettings.link.source=document.getElementById(sourceID).value;clgSettings.link.medium=document.getElementById(sourceID).dataset.medium;clgSettings.link.scope=document.getElementById(sourceID).dataset.scope;}});if(clgSettings.content!='no'){clgSettings.link.content=document.getElementById('content-param-entry').value;}
if(clgSettings.term!='no'){clgSettings.link.term=document.getElementById('term-param-entry').value;}
switch(clgSettings.link.scope){case'external':clgSettings.link.full=clgSettings.link.url+'?utm_campaign='+clgSettings.link.campaign+'&utm_source='+clgSettings.link.source+'&utm_medium='+clgSettings.link.medium;if(clgSettings.content!='no')clgSettings.link.full+='&utm_content='+clgSettings.link.content;if(clgSettings.term!='no')clgSettings.link.full+='&utm_term='+clgSettings.link.term;break;case'internal':clgSettings.link.full=clgSettings.link.url+'?itm_campaign='+clgSettings.link.campaign+'&itm_source='+clgSettings.link.source+'&itm_medium='+clgSettings.link.medium;if(clgSettings.content!='no')clgSettings.link.full+='&itm_content='+clgSettings.link.content;if(clgSettings.term!='no')clgSettings.link.full+='&itm_term='+clgSettings.link.term;break;default:clgSettings.link.full="ERROR";}
$('#gen-result').html(clgSettings.link.full);$('#gen-buttons').append(' <button id="copyButton" class="btn btn-outline-primary" data-clipboard-text="'+clgSettings.link.full+'">Copy to Clipboard</button>');new ClipboardJS('#copyButton');console.log(clgSettings);});}());